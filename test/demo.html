<!DOCTYPE html>
<html lang=en>
<head>
<title>MIDI Player Test</title>
<script src="../node_modules/jzz/javascript/JZZ.js"></script>
<script src="../node_modules/jzz-midi-smf/javascript/JZZ.midi.SMF.js"></script>
<script src=".instrumented/JZZ.input.Uke.js"></script>
<script src=".instrumented/JZZ.input.Uke.js"></script>
<script src="fake-svg.js"></script>
</head>
<body>
<div id="uke_div"></div>
<script>
var out = JZZ().openMidiOut();
var uke = JZZ.input.Uke('Uke', { at: 'uke_div' });
var uke1 = JZZ.input.Uke({ active: false });

JZZ.input.Uke.register({ frets: 1 });
JZZ.input.Uke.register('uke2', { frets: 1 });
var uke2 = JZZ().openMidiIn('uke2').and(function() {
  uke2.disable();
  uke2.enable();
  uke2.close();
});

uke.viewbox(-3.1, -.15, 3.2, 1.35);
uke.transform(1, 3, -3, 1, 0, 0)
var target = document.getElementById('uke_div').children[0];
uke.connect(uke1);
uke1.connect(out);
uke.noteOn(2, 'C4', 127);
uke.noteOn(2, 'C5', 127);
uke.noteOn(2, 'C6', 127);
uke.noteOff(2, 'C4');
uke.noteOff(2, 'C5');
uke.noteOff(2, 'C6');
uke.noteOn(4, 'C5', 127);
uke.noteOff(4, 'C5');
uke.chord([0, 1, 2]);
target.dispatchEvent(new MouseEvent('mousedown', { clientX: -1, clientY: 90, buttons: 1 }));
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
target.dispatchEvent(new MouseEvent('mousedown', { clientX: -2, clientY: 90, buttons: 1 }));
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
target.dispatchEvent(new MouseEvent('mousedown', { clientX: -5, clientY: 90, buttons: 1 }));
target.dispatchEvent(new MouseEvent('mousemove', { clientX: -4, clientY: 90, buttons: 1 }));
target.dispatchEvent(new MouseEvent('mousemove', { clientX: -3, clientY: 90, buttons: 1 }));
target.dispatchEvent(new MouseEvent('mousemove', { clientX: 10, clientY: 90, buttons: 1 }));
target.dispatchEvent(new MouseEvent('mousemove', { clientX: -10, clientY: 90, buttons: 1 }));
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
target.dispatchEvent(new MouseEvent('mousedown', { clientX: -6, clientY: 90, buttons: 1 }));
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
uke.chord();
uke.chord(false);
uke.chord();
var svg = uke.svg();
target.dispatchEvent(new MouseEvent('mousedown', { clientX: 20, clientY: -5, buttons: 1 }));
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
target.dispatchEvent(new MouseEvent('mousedown', { clientX: 20, clientY: -5, buttons: 2 })); // right btn
target.dispatchEvent(new MouseEvent('mousemove', { clientX: 20, clientY: 20, buttons: 2 })); // right btn
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
target.dispatchEvent(new MouseEvent('mousedown', { clientX: 20, clientY: 90, buttons: 1 }));
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
target.dispatchEvent(new MouseEvent('mousedown', { clientX: 0, clientY: 90, buttons: 1 }));
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
target.dispatchEvent(new MouseEvent('mousedown', { clientX: 20, clientY: -1, buttons: 1 })); //f:0
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
target.dispatchEvent(new MouseEvent('mousedown', { clientX: 2, clientY: -1, buttons: 1 })); // f:0 s:0
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
target.dispatchEvent(new MouseEvent('mousedown', { clientX: 2, clientY: 1, buttons: 1 })); // f:1 s:0
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
uke.sticky();
target.dispatchEvent(new MouseEvent('mousedown', { clientX: 2, clientY: -1, buttons: 1 })); // f:0 s:0
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
target.dispatchEvent(new MouseEvent('mousedown', { clientX: 2, clientY: -1, buttons: 1 })); // f:0 s:0
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));
target.dispatchEvent(new MouseEvent('mousedown', { clientX: 2, clientY: 1, buttons: 1 })); // f:1 s:0
target.dispatchEvent(new MouseEvent('mouseup', { buttons: 0, bubbles: true }));

uke.sticky(false);
</script>
</body>
</html>
